dist: trusty
sudo: false
language: python
python: '3.6'
install:
- pip install sphinx==1.4.9
- cd ..
- pwd
- ls -la
- git clone https://github.com/python-doc-ja/py27.git py27
- git clone --depth=5 -b intl-2.7 https://github.com/python-doc-ja/cpython-doc-intl.git cpython
- cd cpython/Doc
- ln -s ../../py27-locale locale
- ls -lF locale
- sphinx-build -j4 -D language=ja -D locale_dirs=locale -D gettext_compact=0 -A versionswitcher=1 -E -d build/doctrees . ../../py27
script:
- cd ../../py27
- git config user.email "travis-build-bot@example.com"
- git config user.name "Autobuild bot on Travis-CI"
- git pull origin master
- git add .
- if [ $(git status -s | wc -l) -eq 0 ]; then echo "nothing to commit"; exit 0; fi
- git commit -a -m "update html"
- git push --quiet "https://${GH_TOKEN}@github.com/python-doc-ja/py27.git" master:master

env:
  global:
    secure: "QnsnBwALpD/ZowBZ6BoWBngd8NuHOj7y6J5ydXnu/L7TmF5sxSyIRd01SV0LlTQFM5ie8UK8N5Q8o2GWJ46Y4akzcOibn1XH+GyjIvbCyJza2Ikehgxf2ADqeMzSw0FecOHANgGhDWeXYVA1q+FowOi7hWTp/+65TDrx+wemqf3r7AkI+IhT0TRIy7UY+KipYFB9KGKJksZfewXQBMtmh6TQFkr64iLl/KRX3r7vmLFY3ycr5PYK98cEIy0GVG/3jaAAEVDl1iSbldRhuP9BktClLSqeezSvRJK6ouLxlBK5iTTJzF6tHqK6HPSxhWSwJzpEZaXa9kKyMl3hRAjbz+I+T0/x3y0X1Z6oiAKtOKfyeaVC3ddLwKnDmtaf/GIf/1ur7mywz5ZDGusbl/VTh+e54ib3sguBxiJ70xms6nWLEtttgCo1t8lIn/MDrBUnTjdJm606eBY3IdI25ndmcqtJ/mI7AS+Q1t+MveA3YY9mDvVtfQYESaDd1aurc3055M1K14rypgEg4VS0R1LkTKu5r7Q3tpX1m4tNpu1ZhYXzKIAsTXvBJ1Boms367VXQ/E9oFqBRICIWzNHdGnOrOX2/bCMjoPjrS1JdA0fjlVqMaLLgFIqysSPoVC3NPyICeLKPYk51I6tzlNIEYDRK2TfJdykKuW4gMtBB6Kfbp3E="
